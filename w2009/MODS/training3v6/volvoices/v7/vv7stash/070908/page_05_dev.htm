<!--
    This code is issued under the GNU General Public License, 
    version 3, 29 June 2007.

    The DLC-MODS Workbook provides a series of web pages to help you 
    generate a MODS metadata record that follows the Digital Library 
    Federation Implementation Guidelines for Shareable MODS Records, 
    as described in the DLF Aquifer Guidlines November 2006.  These 
    Guidelines and the specific MODS Profile are documented on the 
    MODS Profile Page of the DLC-MODS Workbook.

    Copyright (C) 2007 
    Christine Haygood Deane 
    University of Tennessee Libraries
    Digital Library Center
 

    This program is free software: you can redistribute it and/or modify    
    it under the terms of the GNU General Public License as published by    
    the Free Software Foundation, version 3 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program.  If not, see http://www.gnu.org/licenses/
-->

<html>
<head>
<title>
page_05
</title>
<link href="vv_workbook.css" type="text/css" rel="stylesheet">

<script language=javascript src="vv_compose_tags.js"></script>

<script>
var split_token=parent.U.split_token;


function addOneRelatedItemBlock() {
alert("addOneRelatedItemBlock");
if (!confirm("You have chosen to add one Related Item Block.\n\nDo you wish to continue?")){return;} 
buildModsTags(11);
var N = new Number( parent.U.document.UF.numRelatedItems.value);
N=N+1;
parent.U.document.UF.numRelatedItems.value = N;
parent.U.document.UF.VVcomment_02.value = "<!-- NUMBER_OF_RELATED_ITEMS: "+N+": -->"; 
parent.D.location.replace("page_05_dev.htm");
}//end function

function addOneIdentifierBlock() {
alert("addOneIdentifierBlock");
if (!confirm("You have chosen to add one Identifier Block.\n\nDo you wish to continue?")){return;} 
buildModsTags(11);
var N = new Number( parent.U.document.UF.numIdentifiers.value);
N=N+1;
parent.U.document.UF.numIdentifiers.value = N;
parent.U.document.UF.VVcomment_02a.value = "<!-- NUMBER_OF_IDENTIFIERS: "+N+": -->"; 
parent.D.location.replace("page_05_dev.htm");
}//end function


function subtractOneRelatedItemBlock() {
alert("subtractOneRelatedItemBlock");
var N = new Number( parent.U.document.UF.numRelatedItems.value);
if (N==1) {
	alert("Related Item Block #1 may not be removed.");
	return;
	}
if (!confirm("You have chosen to remove one Related Item Block.\n\nDo you wish to continue?")){return;} 
N=N-1;
parent.U.document.UF.numRelatedItems.value = N;
parent.U.document.UF.VVcomment_02.value = "<!-- NUMBER_OF_RELATED_ITEMS: "+N+": -->"; 
parent.D.location.replace("page_05_dev.htm");
}//end function

function subtractOneIdentifierBlock() {
alert("subtractOneIdentifierBlock");
var N = new Number( parent.U.document.UF.numIdentifiers.value);
if (N==1) {
	alert("Identifier Block #1 may not be removed.");
	return;
	}
if (!confirm("You have chosen to remove one Identifier Block.\n\nDo you wish to continue?")){return;} 
N=N-1;
parent.U.document.UF.numIdentifiers.value = N;
parent.U.document.UF.VVcomment_02a.value = "<!-- NUMBER_OF_IDENTIFIERS: "+N+": -->"; 
parent.D.location.replace("page_05_dev.htm");
}//end function


</script>

</head>

<script>document.write('<body onload="load_DF_form();"  bgcolor="'+parent.adb_background_color+'" >');</script>

<font face="arial" size="3">
<center><font face="arial">
<h2> <script> document.write(parent.adb_project_name); </script>
 Page 5 DEV</h2>
</center>

<script>
///Civil War Salt Peter Mining None, LCNAF, ULAN. 





</script>


<form name="DF"  action="new.xml" onload="load_DF_form()"  >

<table class="bgINNER"  border="0" cellpadding="2" cellspacing="1" width="98%" xbgcolor="ddeeff">
<tr class="bgstandard"><td colspan="5">

Required Fields are <u>underlined</u>.
Non-Required Fields are not underlined.
</td></tr>
<tr class="greenrow">
<td><font face="arial" size="3" color="ffffff" ><b>MODS LABEL</td>
<td colspan="4"><font face="arial" size="3" color="ffffff" ><b>VALUE</td>
</tr>
<font face="arial">
<script>

//The Number of Related Items (numRelatedItems) is entered on the Begin Page

var numRI = parent.U.document.UF.numRelatedItems.value;

var str_ri_block_list = new String(parent.U.document.forms[0].ri_block_list.value);

var ari_block = new Array();
    ari_block = str_ri_block_list.split("split_token");

var jj=0;
for(j=0;j<numRI; j++) {

jj=j+1;

document.write('<tr class="bgstandard"> \r\n'
+'<td class="label12u" width="15%"> \r\n'
+'Related Item #'+jj+'</td> \r\n'
+'<td class="value12u" width="15%">&nbsp;<input type="text" name="dyn_itemDisplayLabel_0'+j+'" size="20" value="">'
+'<br><font face="arial" size="1">&nbsp;Display Label (optional)</font></td>'
+'<td class="value12u" width="15%">&nbsp;'
+'<select name="dyn_itemType_0'+j+'" size="1">'
+'<option value="none">none</option>'
+'<option value="constituent">constituent</option>'
+'<option value="host">host</option>'
+'<option value="isReferencedBy">isReferencedBy</option>'
+'<option value="original">original</option>'
+'<option value="otherFormat">otherFormat</option>'
+'<option value="otherVersion">otherVersion</option>'
+'<option value="preceeding">preceeding</option>'
+'<option value="series">series</option>'
+'<option value="succeeding">succeeding</option>'
+'</select>'
+'<br><font face="arial" size="1">&nbsp;Type (optional)</font></td>'
+'<td class="value12u" colspan="2">&nbsp;<input type="text" name="dyn_itemURL_0'+j+'" value="" size="72"  \r\n'
+'class="required300w"  >  \r\n'
+'<br><font face="arial" size="1">&nbsp;URL (required) Must be a valid URL starting with <u>http://</u></font></td>'
+'</td> \r\n'
//+'<td>&nbsp</td> \r\n'
+'</tr> \r\n'
);




}//end for loop


document.write('<input type="hidden" name="ri_block_list" value=""> \r\n');
</script>

<tr class="bgstandard">
<td>&nbsp</td><td colspan="3">&nbsp</td><td>&nbsp</td>
</tr>

<tr class="greenrow"><td colspan="5" >&nbsp;</td></tr>
<tr class="bgstandard">
<td class="label13u">Add or Remove<br>One Related Item</td><td colspan="3">&nbsp;
<input type="button" name="AddOneRIBlock" 
value="Click here to Add One Related Item" class="buttonnw" onClick="addOneRelatedItemBlock();">
<input type="button" name="SubtractOneRIBlock" 
value="Click here to Remove One Subject Block" class="buttonnw" onClick="subtractOneRelatedItemBlock();">

</td><td>&nbsp;</td>
</tr>

<tr class="greenrow">
<td><font face="arial" size="3" color="ffffff" ><b>MODS LABEL</td>
<td colspan="4"><font face="arial" size="3" color="ffffff" ><b>VALUE</td>
</tr>


<script>


//The Number of Identifiers (numIdentifiers) is entered on the Begin Page

var numID = parent.U.document.UF.numIdentifiers.value;

var str_id_block_list = new String(parent.U.document.forms[0].id_block_list.value);

var aid_block = new Array();
    aid_block = str_id_block_list.split("split_token");


var jj=0;

for(j=0;j<numID; j++) {

jj=j+1;
document.write('<tr class="bgstandard"> \r\n'
+'<td class="label12u" width="15%" > \r\n'
+'Identifier'+jj+'</td> \r\n'
+'<td class="value12u" width="15%" valign="top">&nbsp;<input type="text" name="dyn_identDisplayLabel_0'+j+'" size="20" value="">'
+'<br><font face="arial" size="1">&nbsp;Display Label (optional)</font></td>'
+'<td class="value12u" valign="top">&nbsp;'
+'<select name="dyn_identInvalid_0'+j+'" size="1"><option value="no" selected>invalid = no</option><option value="yes">invalid = yes</option></select>'
+'<br><font face="arial" size="1">&nbsp;invalid=yes for deprecated id</font></td>\r\n'
+'<td class="value12u" width="15%" valign="top">&nbsp;'
+'<select name="dyn_identType_0'+j+'" size="1">'
+'<option value="none">none</option>'
+'<option value="ARK" style="background:#ffccff">Archival Res Key (ARK)</option>'
+'<option value="doi" style="background:#ffccff">Digital Res Id (doi)</option>'
+'<option value="hdl" style="background:#ffccff">Handle (hdl)</option>'
+'<option value="uri" style="background:#ffccff">Uniform Res Id (uri)</option>'
+'<option value="isbn" style="background:#ccffee">Internat Std Book # (isbn)</option>'
+'<option value="ismn" style="background:#ccffee">Internat Std Music # (ismn)</option>'
+'<option value="isrc" style="background:#ccffee">Intnat Std Rec Code (isrc)</option>'
+'<option value="issue num" style="background:#ccffee">issue number</option>'
+'<option value="istc" style="background:#ccffee">Internat Std Text Code (istc)</option>'
+'<option value="lccn" style="background:#ccffee">LOC Control # (lccn) </option>'
+'<option value="matrix number"  style="background:#ccffee">matrix number</option>'
+'<option value="music plate"  style="background:#ccffee">music plate</option>'
+'<option value="music publisher" style="background:#ccffee">music publisher</option>'
+'<option value="sici" style="background:#ccffee">Serial Item & Contr Id (sici)</option>'
+'<option value="stock number" style="background:#ccffee">stock number</option>'
+'<option value="upc" style="background:#ccffee">Univ Prod Code (upc)</option>'
+'</select>'
+'<br><font face="arial" size="1">&nbsp;Type (required)</font></td>'
+'<td class="value12u" valign="top">'
+'&nbsp;<input type="text" name="dyn_identifier_0'+j+'" value="" size="72"  \r\n'
+'class="required300w"  >  \r\n'
+'<br><font face="arial" size="1">&nbsp;Identifier (required) Must be a valid Identifier for its type</font></td>'
+'</td> \r\n'
//+'<td>&nbsp</td> \r\n'
+'</tr> \r\n'
);




}//end for loop


document.write('<input type="hidden" name="id_block_list" value=""> \r\n');


</script>










 <!--- placeholder for consitutent_file_uri_1 that JODY makes--->
<input type="hidden" name="constituent_file_uri_1" value="">

<tr class="bgstandard">
<td>&nbsp;</td><td >&nbsp;</td><td>&nbsp;</td>
<td><font face="arial" size="1">&nbsp;digital types highlighted pink<br>&nbsp;analog types highlighted green</td><td>&nbsp;</td>
</tr>
<tr class="bgstandard">
<td>&nbsp;</td><td colspan="3">&nbsp</td><td>&nbsp</td>
</tr>

<tr class="greenrow"><td colspan="5" >&nbsp;</td></tr>
<tr class="bgstandard">
<td class="label13u">Add or Remove<br>One Subject Block</td><td colspan="3">&nbsp;
<input type="button" name="AddOneIdBlock" 
value="Click here to Add One Identifier Block" class="buttonnw" onClick="addOneIdentifierBlock();">
<input type="button" name="SubtractOneIdBlock" 
value="Click here to Remove One Identifier Block" class="buttonnw" onClick="subtractOneIdentifierBlock();">

</td><td>&nbsp;</td>
</tr>

<tr class="greenrow"><td colspan="5" >&nbsp;</td></tr>




<tr class="bgstandard"><td colspan="5" align="center">
&nbsp;&nbsp;

<!-- input type="button" name="B_page_01" class="buttonnw" onclick ="javascript:location.replace('page_00_begin_gen.htm')" value="Return to Begin Page"-->
&nbsp;&nbsp;<input type="button" name="B_UF" value="Save" class="buttonnw" onclick="buildModsTags(10);">&nbsp;&nbsp;
<!---input type="button" name="B_DF" value="Reset"  class="buttonnw" onclick="load_DF_form();"--->

<input type="button" name="B2" 
value="Save Data and View MODS TAGS" class="buttonnw"
onclick="buildModsTags(1)">



</td></tr>
<tr class="bgstandard" >
<td>&nbsp</td><td colspan="3">&nbsp</td><td>&nbsp</td>
</tr>

</table>



</form name="forms[0]">

<center><font face="arial">
<h2> <script> document.write(parent.adb_project_name); </script></h2>
</center>


<script>


function load_UF_form() {
//alert("load_UF_form");

parent.U.document.forms[0].ri_block_list.value = document.DF.ri_block_list.value;
parent.U.document.forms[0].id_block_list.value = document.DF.id_block_list.value;

return;
}


/*
function page4_load_DF_form() {

////alert("begin function load_DF_form");
var split_token=parent.U.split_token;
////alert("load_DF_FORM split_token="+split_token);
if (parent.U.document.UF.subject_block_list.value == "" ) {
	return;
	}

document.DF.subject_block_list.value = parent.U.document.UF.subject_block_list.value;

var subdL = new String(parent.U.document.UF.subject_block_list.value);
var Asd = new Array();
    Asd = subdL.split(split_token);

for (i=0;i<Asd.length;i++){
	//alert("load_DF_form(): Asd["+i+"]="+Asd[i]);
	}

var numS = parent.U.document.UF.numSubjectBlocks.value;

var m=0; //counter for Asd[m] array
for(i=0;i<document.DF.length;i++)
{
var sbox = document.DF.elements[i];
if ( sbox.name.indexOf("subject_0") == 0 ) {
		if(typeof(Asd[m]) != "undefined") {
		sbox.value = Asd[m++];	
		//alert("document.DF.elements["+i+"].name="+sbox.name
	 	//+"\ndocuments.DF.elements["+i+"].value="+sbox.value);
		}else{
		sbox.value="";
		}
	}
}


///alert("end function load_DF_form");

return;
}///end function load_DF_form
*/

function load_DF_form() {//page 05 gets info from page_upper

if (parent.U.document.UF.ri_block_list.value == "" && parent.U.document.UF.id_block_list == "") {
	return;
	}

var split_token=parent.U.split_token;


////PROCESS RELATED ITEMS
document.DF.ri_block_list.value = parent.U.document.UF.ri_block_list.value;
alert("load_DF_form\ndocument.DF.ri_block_list.value=\n"+document.DF.ri_block_list.value+"\nsplit_token="+split_token)

var str_ri_block = new String(parent.U.document.UF.ri_block_list.value);
var Ari = new Array();
    Ari = str_ri_block.split(split_token);   

for (i=0;i<Ari.length;i++){
	alert("Ari["+i+"]="+Ari[i]);
	}

var numRI = new Number(parent.U.document.UF.numRelatedItems.value); 
var m=0; //counter for Ari[m] array
for(i=0;i<document.DF.length;i++)
{
var sbox = document.DF.elements[i];
//alert("document.DF.elements["+i+"].name="+sbox.name+"\ndocuments.DF.elements["+i+"].value="+sbox.value);
if ( sbox.name.indexOf("dyn_item") == 0 ) {
		if(typeof(Ari[m]) != "undefined") {
		sbox.value = Ari[m++];	
		alert("document.DF.elements["+i+"].name="+sbox.name+"\ndocuments.DF.elements["+i+"].value="+sbox.value);
		}else{
		sbox.value="";
		}
	}

}//end for



var selectList = new Array(
 "none"
,"constituent"
,"host"
,"isReferencedBy"
,"original"
,"otherFormat"
,"otherVersion"
,"preceeding"
,"series"
,"succeeding"
);





////PROCESS IDENTIFIERS
document.DF.id_block_list.value = parent.U.document.UF.id_block_list.value;
var str_id_block = new String(parent.U.document.UF.id_block_list.value);

var Aid = new Array();
    Aid = str_id_block.split(split_token);

for (i=0;i<Aid.length;i++){
	alert("Aid["+i+"]="+Aid[i]);
	}

var numID = new Number(parent.U.document.UF.numIdentifiers.value);
var m=0; //counter for Aid[m] array
for(i=0;i<document.DF.length;i++)
{
var sbox = document.DF.elements[i];
if ( sbox.name.indexOf("dyn_ident") == 0 ) {
		if(typeof(Aid[m]) != "undefined") {
		sbox.value = Aid[m++];	
		//alert("document.DF.elements["+i+"].name="+sbox.name
	 	//+"\ndocuments.DF.elements["+i+"].value="+sbox.value);
		}else{
		sbox.value="";
		}
	}//end if
}//end for


var selectList_id = new Array(
 "none0"
,"none1"
,"ARK"
,"doi"
,"hdl"
,"uri"
,"none2"
,"isbn"
,"ismn"
,"isrc"
,"issue num"
,"istc"
,"lccn"
,"matrix number"
,"music plate"
,"music publisher"
,"sici"
,"stock number"
,"upc"
);




return;
}


function buildModsTags(N) {
var split_token=parent.U.split_token;


alert("buildModsTags("+N+") get to here 1");

var riaAll = new String("");
var idaAll = new String("");
var s= new String("");
for(i=0;i<document.DF.length;i++)
{
s = document.DF.elements[i].name;
if ( s.indexOf("dyn_item") == 0 ) {
	riaAll += split_token + document.DF.elements[i].value;
	alert("RI document.DF.elements["+i+"].name="+s);
	}
if ( s.indexOf("dyn_ident") == 0 ) {
	idaAll += split_token + document.DF.elements[i].value;
	//alert("ID document.DF.elements["+i+"].name="+s);
	}
}

riaAll = riaAll.substring(split_token.length);
idaAll = idaAll.substring(split_token.length);

//load hidden values
document.DF.ri_block_list.value = riaAll;
document.DF.id_block_list.value = idaAll;



////do this first so current values are loaded regardless of validation status
load_UF_form();

///////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////
//before writing MODS TAGS, make sure all required fields are populated
//checkAllRequired... true  validation sets validation status to 1  -- complete
//checkAllRequired... false validation sets validation status to 0  -- incomplete

/*
if (!parent.L.checkAllRequiredElements_Page_05() ) {
	parent.L.update_page_validation(5,0);
	return;
}
parent.L.update_page_validation(5,1);
*/

///////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////

var num = new Number();
    num = N;

if (num == 11) {return;}
if (num == 10) {
        alert("Values have been saved.");
        return;
        }



var abreak = new String("");
if (num != "0" && num!=10 ) {
	abreak = "<BR>";
	}

load_UF_form();

var aps= new Array();
var aps= new Array();
var hps= new Array();
var cps= new Array();
    
    hps = buildTagsArray_header(num);
    aps = buildTagsArray_page_05_dev(num);
    cps = buildTagsArray_closer(num);

//=================================================

document.write('<input type="button" name="BBACK" onclick="javascript: history.back()" value="BACK"><P>');
document.write('<font face="Elephant" size="3" color="a00000">'+parent.adb_project_name+' Workbook, Page 5<p></font>');
//PRELIMINARY COPY FOR DEMONSTRATION PURPOSES ONLY</font><p>'
document.write('<font face="Elephant" size="3" color="a00000">PRELIMINARY COPY FOR DEMONSTRATION PURPOSES ONLY</font><p>'
		+"This is the generated xml script.  Values you entered are highlighted in red."
		+"<HR>");
//document.write( "This is the generated xml script.  Values you entered are highlighted in red.<HR>");

///document.write('< ? xml version="1.0"  ? > \r\n'); 
///document.write("Content-Type: text/xml ")



for (i=0;i<hps.length;i++) {
	var vps = new String(hps[i]);
 	document.write(abreak+vps);
	}



for (i=0;i<aps.length;i++) {
	var vps = new String(aps[i]);
	document.write(abreak+vps);
	}



for (i=0;i<cps.length;i++) {
	var vps = new String(cps[i]);
	document.write(abreak+vps);
	}


}//end function





</script>
	
<script>
function fdg() {
//return;

var BEGINFORM = 0;
var ENDFORM   = document.forms.length;

document.write("<div id='formdebug' align='left'><font face='arial' size='1' color='a00000'>");
for ( jj=BEGINFORM; jj<ENDFORM; jj++ ) {
document.write('<hr> document.forms['+jj+'].name='+document.forms[jj].name+'<br>');
document.write(' document.forms['+jj+'].method='+document.forms[jj].method+'<br>');
document.write(' document.forms['+jj+'].action='+document.forms[jj].action+'<br>');

for(i=0;i<document.forms[jj].length;i++)
{
document.write( 'document.forms['+jj+']::'+ document.forms[jj].name+".elements["+i+"]::"
			  +' ------name: '+document.forms[jj].elements[i].name
			  +' ------type: '+document.forms[jj].elements[i].type
			  +' -----value: '+document.forms[jj].elements[i].value
			  )
			  if ( typeof(document.forms[jj].elements[i].tabindex) != 'undefined') {
			  document.write( ' -----tabindex: '+ document.forms[jj].elements[i].tabindex )
			  }
			  if ( typeof(document.forms[jj].elements[i].onblur) != 'undefined') {
			  document.write( ' -----onblur: '+ document.forms[jj].elements[i].onblur )
			  }
			  if ( document.forms[jj].elements[i].type == 'button' ) {
			  document.write( ' -----onclick: '+ document.forms[jj].elements[i].onclick )
			  }
			  if ( document.forms[jj].elements[i].type == 'radio' ) {
			  document.write( ' -----checked: '+ document.forms[jj].elements[i].checked )
			  }
document.write('<br>')
			  
			  }}




document.write("<HR>");
document.write(	" location.href = "+location.href+"<BR>");
document.write('document.location.href='+document.location.href+'<BR>');
document.write(	" parent.location.href = "+parent.location.href+"<BR>");
document.write("<HR>");



for ( i=0; i<parent.frames.length; i++ ) 
{
document.write(	" parent.frames["+i+"] :: "
			+ " ------name: "+parent.frames[i].name
			+ " ------location.href: "+ parent.frames[i].location.href
			+ "<br>"
			);
			}

document.write("<HR>");
document.write("</font></div>");

}///end function formvardebug()

fdg();
</script>

<hr>
</body>
</html>

<!------

<html><head><style type="text/css"><!-- DIV {margin:0px;} --></style></head><body>
<div style="font-family:arial,helvetica,sans-serif;font-size:10pt">
<div>Hi, Cricket,
<br><br>Here's some info on the change in page 5 and begin page (relatedItem) we discussed Monday.<br>
<br>Begin page - Change "# of Constituent files" to "Number of related items"&nbsp; 
Then the help text beside the entry box can say "Enter the number of related items to which you'd like to link.&nbsp; 
Input boxes will be generated on page 5 of the workbook based on this number." <br>
<br><span>Then on page 5, allow the user to specify the type.&nbsp; 
Options for type attribute value should be: 
preceding, succeeding,&nbsp; original, host,&nbsp; constituent, series, otherVersion,  otherFormat, isReferencedBy.&nbsp; 
(per MODS guidelines 

<a target="_blank"
 href="http://www.loc.gov/standards/mods/v3/mods-userguide-elements.html#relateditem">
http://www.loc.gov/standards/mods/v3/mods-userguide-elements.html#relateditem</a>)</span><br>
<br>Also allow the user to specify a display label value with a free text entry box.<br>
<br>Both of these attributes should be optional, so there should be an option to select "none" on both.&nbsp; <br>
<br>Now here's a sample of the markup:<br><br><span>

< relatedItem displaylabel="Other Version" type="otherVersion" xlink:href="&lt;a target='_blank' 
href='http://diglib.lib.utk.edu/8976559/024'&gt;http://diglib.lib.utk.edu/8976559/024&lt;/a&gt;">< /relatedItem>
</span><br><br>or if they opt not to use type or label:<br><br><span>
< relatedItem xlink:href="&lt;a target='_blank' href='http://diglib.lib.utk.edu/8976559/024'&gt;http://diglib.lib.utk.edu/8976559/024&lt;/a&gt;">< /relatedItem>


</span><br><br>Hope that makes sense.&nbsp; It's basically just what we discussed



 Monday.<br><br>Thanks, Cricket.<br><br>Melanie<br></div></div>



------->
